# 五笔词库管理器

## 简介
1. 生成各主流输入法的五笔挂接文件，如搜狗输入法（PC与Android端）、搜狗五笔（PC端）、百度输入法（Android端）等。
2. 支持自定义汉字范围，默认汉字范围为CJKV基本区+扩展A区+部分补充字，可扩展至全部CJKV象形字符。（需要注意输入法软件的挂接文件会有词条数限制，如搜狗拼音输入法的自定义短语上限10万，百度输入法的自定义方案上限20万。）
3. 支持自定义汉字码表，默认汉字码表基于86五笔方案。（在86方案基础上加入部分繁体字根，并修正错误字根，e.g. 麸 gqfw $\to$ gtfw，囱 tlq $\to$ tlt。）![五笔字根表](./images/wubiRadicals_86_加入繁体字根_易读版.jpg)
4. 支持添加任意Unicode字符，且自定义编码。

## 功能
### 生成挂接文件

运行`main.py`，即可生成挂接文件。挂接文件位于`./outputFiles`，可直接导入相应输入法软件使用。

- 搜狗输入法（PC端）

    将`sgPy_custPhrases.txt`导入自定义短语。

- 搜狗输入法（Android端）
    
    将`mSg_custScheme.txt`导入自定义五笔方案，将`mSg_custPhrases.csv`导入常用语。

- 搜狗五笔输入法（PC端）

    将`sgWb_custChars.txt`导入自定义五笔方案，将`sgWb_custWords.txt`导入用户词汇，将`sgWb_custPhrases.txt`导入自定义短语。

- 百度输入法（Android端小米版）

    利用[点讯输入法词库管理工具](https://github.com/someWorlds/dianxunLibTool)，将`mBd_custScheme_mi.txt`转成软件自定义方案的`.bin`格式, 将其导入自定义方案。

- 百度输入法（Android端）

    将`mBd_custScheme.txt`导入自定义五笔方案。

> 含后缀`_withPi`与不含后缀的文件的区别为是否包含私人信息等敏感词汇，可自行选择使用。


### 编辑码表
- 直接编辑`./custWubiLex`目录下的相应`.yaml`文件修改码表。
- 可运行`main.py`，在命令行输入以下格式的字符串，以修改码表文件。

#### 命令行字符串格式
``` cmd
rem  编辑字词：
[一-鿿㐀-䶿〇]+    [0-9]?    (?<=[1-9]+[ \t]+)[1-4]?

rem  编辑短语：
[\S]+    [0-9]?    [a-z]+
[\S]+    [a-z]+    [0-9]?

rem  符号解释:
rem  [一-鿿㐀-䶿〇]+    字词的汉字范围为cjkv_bsc+a+cmp。
rem  [0-9]?    指定候选排序0-9, 0表示删除, 1-8表示位次, 9表示后置。
rem  (?<=[1-9]?[ \t]+)[1-4]?    指定码数1-4, 指定前必须先指定排序, 省略表示4码。
rem  [\S]+    短语不含空字符。
rem  [a-z]+    指定编码, 不可省略, 省略时按字词处理。
```

示例:
```cmd

你好
rem  添加，全码，词“你好”

五笔    2
rem  添加或修改，全码，词“五笔”，指定排序第2

还可以    0
rem  删除，全码，词“还可以”

αβγ    9
rem  修改，短语“αβγ”，排序置后

不    1
rem  添加或修改，全码，字“不”，指定排序第1

是    2    1
rem  添加或修改，一简，字“好”，指定排序第2

问题    0    2
rem  删除，二简，词“问题”

五笔词库管理器niubi    wbn
rem  添加，指定编码“wbn”，短语“五笔词库管理器niubi”

五笔词库管理器nice    2    wbn
rem  添加或修改，指定编码“wbn”，短语“五笔词库管理器nice”，指定排序第2

五笔词库管理器no.1    wbn    0
rem  删除，指定编码“wbn”，短语“五笔词库管理器nice”
```

> 私人信息敏感词条，需手动添加，目标文件`words_pi.yaml`、`syms_pi.yaml`。